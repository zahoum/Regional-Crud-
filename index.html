<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact App</title>
</head>
<body>
    <h1>ADD Contact</h1>

    <div class="father">
        <div class="input">
            <input type="text" id="smiya" placeholder="name"><br>
            <input type="email" id="jmail" placeholder="email"><br>
            <input type="button" value="Add" id="add" onclick="addContact()"><br>
        </div>

        <h1>All Contacts</h1>

        <div class="output"  id="afichage">
            
        </div>
    </div>

    <script>
        let t =JSON.parse(localStorage.getItem('contacts')) || [];
        function addContact(){
            name = document.getElementById('smiya').value;
            mail = document.getElementById('jmail').value ;
            
            if (name && mail) {
                t.push({ name, mail });
                affichier();
            }
            else {
                alert('Please fill in all fields');
            }

        }
        function affichier(){
            let contact = document.getElementById('afichage')
            contact.innerHTML = '';


            t.forEach((element,index) => {
                contact.innerHTML +=`
                    <p>${element.name} <br>
                        ${element.mail}<br>    
                    <button onclick = "update(${index})" value="update">update</button>
                    <button onclick = "move(${index})" value = "delete">delete</button>
                    </p>
                `
            });
        }
        function save() {
            localStorage.setItem('contacts',JSON.stringify(t));
        }  
        window.onload = function() {
            affichier();
        }
        function move(index){
            t.splice(index,1);
            affichier();
            save();
        }
        function update(index){
            let name = prompt('Put A New Name To Change :' + t[index].name);
            let mail = prompt('put A New Email To Change :' + t[index].mail);
            if (name && mail){
                t[index].name = name;
                t[index].mail = mail;
                affichier();
                save();
            }
        }
    </script>
</body>
</html>
